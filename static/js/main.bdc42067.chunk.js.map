{"version":3,"sources":["images/logo/logo.svg","components/Header.js","utils/Api.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","headerLogo","alt","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","Error","status","fetch","method","then","_showErrow","data","body","JSON","stringify","id","like","authorization","CurrentUserContext","React","createContext","Card","card","onCardClick","onImageClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","link","onClick","type","name","length","Main","cards","props","avatar","onEditAvatar","onEditProfile","about","onAddPlace","map","Footer","PopupWithForm","isOpen","onSubmit","onClose","title","children","buttonTitle","EditProfilePopup","useState","setName","description","setDescription","useEffect","fieldsetInfo","placeholder","minLength","maxLength","onChange","e","target","value","required","preventDefault","onUpdateUser","EditAvatarPopup","avatarRef","useRef","fieldsetAvatar","ref","onUpdateAvatar","current","AddPlacePopup","nameRef","linkRef","fieldsetAddCard","ImagePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isCardOpen","setIsCardOpen","setCurrentUser","closeAllPopups","getUserInfo","catch","err","alert","setCards","getInitialCards","dataCards","item","Provider","changeLikeCardStatus","newCard","newCards","c","deleteCard","deleteId","filter","setUserInfo","dataInfo","makeNewCard","sethUserAvatar","dataAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bdc42067.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React from 'react';\r\nimport headerLogo from '../images/logo/logo.svg';\r\n\r\nfunction Header() {\r\n    return (\r\n        <header className=\"header\">\r\n            <img src={headerLogo} alt=\"логотип\" className=\"logo\" />\r\n        </header>\r\n    )\r\n}\r\nexport default Header;","import React from 'react';\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._url = options.url;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _showErrow(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    // если ошибка, отклоняем промис\r\n    Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n\r\n  sethUserAvatar(data) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n\r\n  makeNewCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._url}/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n\r\n  changeLikeCardStatus(id, like) {\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n      method: like ? 'DELETE' : 'PUT',\r\n      headers: this._headers,\r\n    }).then((res) => this._showErrow(res));\r\n  }\r\n}\r\n\r\nconst api = new Api({ \r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-16', \r\n  headers: { \r\n    authorization: 'db246294-1b1a-41e2-ab61-b5ce8b44318f', \r\n    'Content-Type': 'application/json', \r\n  }, \r\n}); \r\n\r\nexport default api;","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n// export const currentUser = ","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onCardClick, onImageClick, onCardLike, onCardDelete }) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    // Определяем, являемся ли мы владельцем текущей карточки\r\n    const isOwn = card.owner._id === currentUser._id;\r\n\r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    function handleClick() {\r\n        onCardClick(card);\r\n        onImageClick();\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        onCardLike(card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        onCardDelete(card);\r\n    }\r\n\r\n    return (\r\n        <div className=\"place__container\">\r\n            <img src={card.link} alt=\"Фотография места\" className=\"place__image\" onClick={handleClick} />\r\n            <button\r\n                type=\"button\"\r\n                className={`place__delete ${isOwn ? 'place__delete_visible' : ''}`}\r\n                onClick={handleDeleteClick} />\r\n            <div className=\"place__group\">\r\n                <h2 className=\"place__title\">{card.name}</h2>\r\n                <form className=\"place__like-container\">\r\n                    <button\r\n                        type=\"button\"\r\n                        className={`place__like ${isLiked ? 'place__like_active' : ''}`}\r\n                        onClick={handleLikeClick} />\r\n                    <p className=\"place__like-counter\">{card.likes.length}</p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport api from '../utils/Api';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction Main({cards, ...props}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <img src={currentUser.avatar} type=\"button\" alt=\"Фото пользователя\" className=\"avatar\" />\r\n        <div className=\"avatar avatar__hover\" onClick={props.onEditAvatar}></div>\r\n        <div className=\"profile-info\">\r\n          <div className=\"profile-info__container\">\r\n            <h1 className=\"profile-info__name\">{currentUser.name}</h1>\r\n            <button type=\"button\" className=\"edit-button\" onClick={props.onEditProfile} />\r\n          </div>\r\n          <p className=\"profile-info__activity\">{currentUser.about}</p>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace} />\r\n      </section>\r\n      <section className=\"places\">{\r\n        cards.map((card) =>\r\n          <Card\r\n            key={card._id}\r\n            cards={props.cards}\r\n            card={card}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n            onCardClick={props.onCardClick}\r\n            onImageClick={props.onImageClick} />)\r\n      }\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n          <p className=\"footer__copyright\">&#169; 2020 Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n    return (\r\n        <form className={`popup popup__${props.name} ${props.isOpen ? 'popup_opened' : ''}`} \r\n        name={props.name}  onSubmit={props.onSubmit}>\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" className=\"popup__close-button\" onClick={props.onClose}></button>\r\n                <h2 className=\"popup__title\">{props.title}</h2>\r\n                <fieldset className=\"popup__profile\">\r\n                {props.children}\r\n                </fieldset>\r\n                <button type=\"submit\" className=\"popup__button\">{props.buttonTitle}</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser]);\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleChangedescription(e) {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n  // Запрещаем браузеру переходить по адресу формы\r\n  e.preventDefault();\r\n\r\n  // Передаём значения управляемых компонентов во внешний обработчик\r\n  props.onUpdateUser({\r\n    name,\r\n    about: description,\r\n  });\r\n    }\r\n\r\n    const fieldsetInfo =\r\n        <>\r\n            <input type=\"text\"\r\n                placeholder=\"Имя\"\r\n                className=\"popup__input popup__input_name\"\r\n                id=\"name-input\"\r\n                name=\"name\"\r\n                minLength=\"2\"\r\n                maxLength=\"40\"\r\n                onChange={handleChangeName}\r\n                value={name}\r\n                required />\r\n            <span className=\"popup__error\" id=\"name-input-error\"></span>\r\n            <input type=\"text\"\r\n                placeholder=\"О себе\"\r\n                className=\"popup__input popup__input_activity\"\r\n                id=\"activity-input\"\r\n                name=\"about\"\r\n                minLength=\"2\"\r\n                maxLength=\"200\"\r\n                onChange={handleChangedescription}\r\n                value={description}\r\n                required />\r\n            <span className=\"popup__error\" id=\"activity-input-error\"></span>\r\n        </>\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"info\"\r\n            title=\"Редактировать профиль\"\r\n            buttonTitle=\"Сохранить\"\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            onSubmit={handleSubmit}>\r\n            {fieldsetInfo}\r\n        </PopupWithForm>)\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n    const avatarRef = React.useRef('');\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar({\r\n          avatar: avatarRef.current.value,\r\n        });\r\n      } \r\n\r\n    const fieldsetAvatar =\r\n        <>\r\n            <input type=\"url\"\r\n                placeholder=\"Ссылка на аватар\"\r\n                className=\"popup__input popup__input_avatar-link\"\r\n                id=\"avatar-input\"\r\n                name=\"avatar\"\r\n                ref={avatarRef}\r\n                required />\r\n            <span className=\"popup__error\" id=\"avatar-input-error\"></span>\r\n        </>\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"avatar\"\r\n            title=\"Обновить аватар\"\r\n            buttonTitle=\"Сохранить\"\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            onSubmit={handleSubmit}\r\n            onUpdateAvatar={props.onUpdateAvatar}\r\n        >{fieldsetAvatar}</PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const nameRef = React.useRef('');\r\n    const linkRef = React.useRef('');\r\n\r\n    function handleAddPlaceSubmit(e) {\r\n        e.preventDefault();\r\n        props.onAddPlace({\r\n            name: nameRef.current.value,\r\n            link:linkRef.current.value\r\n        })\r\n    }\r\n    \r\n  const fieldsetAddCard =\r\n  <>\r\n    <input type=\"text\"\r\n      placeholder=\"Название\"\r\n      className=\"popup__input popup__input_placename\"\r\n      id=\"placename-input\"\r\n      name=\"name\"\r\n      minLength=\"1\"\r\n      maxLength=\"30\"\r\n      ref={nameRef}\r\n      required />\r\n    <span className=\"popup__error\" id=\"placename-input-error\"></span>\r\n    <input type=\"url\"\r\n      placeholder=\"Ссылка на картинку\"\r\n      className=\"popup__input popup__input_link\"\r\n      id=\"email-input\"\r\n      name=\"link\"\r\n      ref={linkRef}\r\n      required />\r\n    <span className=\"popup__error\" id=\"email-input-error\"></span>\r\n  </>\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"add-card\"\r\n            title=\"Новое место\"\r\n            buttonTitle=\"Сохранить\"\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            onSubmit={handleAddPlaceSubmit}\r\n            onAddPlace={props.onAddPlace}>\r\n            {fieldsetAddCard}\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n  return (\r\n    <div className={`popup popup_photo ${props.isOpen ? 'popup_opened' : ''}`}>\r\n      <figure className=\"popup__photo-container\">\r\n        <button type=\"button\" className=\"popup__close-button popup__close-button_photo\" onClick={props.onClose} />\r\n        <div>\r\n          <img alt=\"Фотография места\" src={props.isOpen ? props.card.link : ''} className=\"popup__image\" />\r\n          <figcaption className=\"popup__title-photo\">{props.isOpen ? props.card.name : ''}</figcaption>\r\n        </div>\r\n      </figure>\r\n    </div>\r\n  )\r\n}\r\nexport default ImagePopup;","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport api from '../utils/Api';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [isCardOpen, setIsCardOpen] = React.useState(false);\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n\r\n  React.useEffect(() => {\r\n    api.getUserInfo().then((data) => {\r\n      setCurrentUser(data);\r\n    }).catch((err) => {\r\n      alert(err);\r\n    })\r\n  }, []);\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\r\n  }\r\n\r\n  function handleCardClick() {\r\n    setIsCardOpen(!isCardOpen);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditProfilePopupOpen();\r\n    setIsAddPlacePopupOpen();\r\n    setIsEditAvatarPopupOpen();\r\n    setIsCardOpen();\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.setUserInfo(data).then((dataInfo) => {\r\n      setCurrentUser(dataInfo);\r\n      closeAllPopups();\r\n    })\r\n  }\r\n\r\n  function handleUpdateAvatar(data) {\r\n    api.sethUserAvatar(data).then((dataAvatar) => {\r\n      setCurrentUser(dataAvatar);\r\n      closeAllPopups();\r\n    })\r\n  }\r\n\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards().then((dataCards) => {\r\n      setCards(\r\n        dataCards.map((item) => ({\r\n          _id: item._id,\r\n          name: item.name,\r\n          link: item.link,\r\n          likes: item.likes,\r\n          owner: item.owner\r\n        })\r\n        ))\r\n    }).catch((err) => {\r\n      alert(err);\r\n    })\r\n  }, []);\r\n\r\n  \r\n  function handeleAddPlace(data) {\r\n    api.makeNewCard(data).then((newCard) => {\r\n      // Обновляем стейт\r\n      setCards([newCard, ...cards]); \r\n      closeAllPopups();\r\n    }).catch((err) => {\r\n      alert(err);\r\n    });\r\n  }\r\n\r\n\r\n  function handleCardLike(card) {\r\n    // Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\r\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    }).catch((err) => {\r\n      alert(err);\r\n    });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(() => {\r\n      const deleteId = card._id;\r\n      // // Формируем новый массив на основе имеющегося, удаляя из него карточку\r\n      const newCards = cards.filter((card) => card._id !== deleteId);\r\n      // // Обновляем стейт\r\n      setCards(newCards);\r\n    }).catch((err) => {\r\n      alert(err);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <div className=\"page\">\r\n          <Header />\r\n          <Main\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditProfile={handleEditProfileClick}\r\n            onCardClick={setSelectedCard}\r\n            onImageClick={handleCardClick}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n            cards={cards}\r\n          />\r\n          <Footer />\r\n          <EditProfilePopup\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateUser={handleUpdateUser} />\r\n          <AddPlacePopup\r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlace={handeleAddPlace} />\r\n          <PopupWithForm name=\"submit\" title=\"Вы уверены?\" buttonTitle=\"Да\"\r\n            onClose={closeAllPopups}>{''}</PopupWithForm>\r\n          <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n          />\r\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} isOpen={isCardOpen} />\r\n\r\n        </div>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}